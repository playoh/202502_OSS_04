<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div class="btns">
    <button id="read">조회</button>
    <button id="create">추가</button>
    <button id="update">수정</button>
    <button id="delete">삭제</button>
  </div>
  <div>
    <ul id="list"></ul>
  </div>
  <div>
    <form>
      <label>이름</label>
      <input id="name" type="text" placeholder="이름을 입력해 주세요" required />
      <label>학번</label>
      <input id="stuNum" type="number" placeholder="학번을 입력해 주세요" required />
      <label>이메일</label>
      <input id="email" type="email" placeholder="이메일을 입력해 주세요" required />
      <label>나이</label>
      <input id="age" type="number" placeholder="나이를 입력해 주세요" required />
      <label>전공</label>
      <input id="major" type="text" placeholder="전공을 입력해 주세요" required />
    </form>
  </div>
</body>
<script>
  const list = document.getElementById("list");
  const rBtn = document.getElementById("read");
  const cBtn = document.getElementById("create");
  const uBtn = document.getElementById("update");
  const dBtn = document.getElementById("delete");

  function getData() {
    fetch("./data.json")
      .then(response => response.json())
      .then(data => {
        list.innerHTML = "";
        data.students.forEach(e => {
          const li = document.createElement("li");
          li.textContent = `
            ${e.id}
            ${e.name}
            ${e.age}
            ${e.major}
          `;
          list.appendChild(li);
        });
      })
      .catch(err => console.log("Error:", err));
  };
  function postData() {
    const name = document.getElementById("name");
    const age = document.getElementById("age");
    const major = document.getElementById("major");
    const stuNum = document.getElementById("stuNum");

    if (!name || !major || (!age)) return alert("입력값을 확인하세요.");

    fetch("./data.json",
      {
        method: "POST",
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, age, major, stuNum })
      }
    )
      .then(response => response.json())
      .then(data => {
        alert(data["msg"]);
      });
  };
  function updateData() {

  };
  function deletData() {

  };

  rBtn.addEventListener("click", getData);
  cBtn.addEventListener("click", postData);
  uBtn.addEventListener("click", updateData);
  dBtn.addEventListener("click", deletData);

</script>

</html>